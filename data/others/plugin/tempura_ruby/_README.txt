========== ========== ========== ==========
     ルビ拡張プラグイン
========== ========== ========== ==========

【最終更新日】2018/03/02 23:54
【  名  称  】ルビ拡張プラグイン
【  種  別  】ティラノスクリプト用の外部プラグイン
【 製 作 者 】荻原（おぎはら）
【 開発環境 】64bit版Windows10, ティラノスクリプトv461, ティラノライダーv211 
【 動作環境 】上記開発環境にて確認
【 連 絡 先 】Twitterまでどうぞ（@tempura17654）
【 配 布 元 】http://tempura9357.blog.fc2.com
【ライセンス】MIT

---------- ----------



◇ 概要 ◇

ティラノスクリプトのルビ機能を強化するプラグインです。
このプラグインは、黒豆きづねさんが作成した
「ルビ拡張プラグイン（http://libretto.mond.jp/mamecho/plugin/ruby）」に
改造を加えたものです。
基本的な機能はもとのプラグインに準じています。

このプラグインを導入すると、
・[rubydic]
・[rubyconfig]
の2つのタグを使えるようになります。



◇ ファイル構成 ◇

tempura_ruby
 ├ dic.json
 ├ kag.ruby.js
 ├ kag.tag_ruby.js
 ├ kag.tag.js
 ├ init.ks
 ├ _SAMPLE.ks
 └ _README.txt



◇ 導入方法 ◇

解凍して出てきた「tempura_ruby」フォルダを、
「data/others/plugin/」下にコピーしてください。
その後、first.ksに以下のタグを記述してください。

    [plugin name=tempura_ruby]

また、tempura_rubyフォルダの中にある「dic.json」ファイルを編集することで、
ルビ辞書を作ることができます。編集方法→http://libretto.mond.jp/mamecho/plugin/ruby



◇ pluginタグに指定できるパラメータ ◇

    show             : 辞書に登録したルビを何回振るか。eachで毎回(初期値)、onceで1回。
    type             : ルビの水平位置。justifyで均等割り付け(初期値)、centerで中央寄せ。
    ruby_size        : ルビの文字サイズ(px)。autoだと自動で計算します(初期値)。
    ruby_offset      : ルビの縦位置(px)。autoだと自動で計算します(初期値)。
    enable_transform : ルビの横幅が本文の横幅を超えた場合、ルビを縦に圧縮するか。
                       trueならする、falseならしない(初期値)。
    enable_margin    : ルビの横幅が本文の横幅を超えた場合、本文の文字間隔を広げるか。
                       trueなら広げる(初期値)、falseなら広げない。
    enable_onetoone  : trueの場合(初期値)、本文とルビの文字数が一致した場合、
                       ruby_typeにかかわらず文字を真上にルビが来るようになる。falseで無効。
    enable_backlog   : バックログにもルビを挿入するか。trueならする(初期値)、falseならしない。
    time             : 文字を挿入する際にフェードインさせる時間(ミリ秒)。初期値は200。
    builder          :【ティラノビルダーの場合のみ必須】ビルダーのバージョンを指定します。たとえば170。
                       ※この値によって行うべき処理を判断しています。これをサボると、
                         クリック待ち画像が現れないなどの現象が生じます。
    
    || 読み込み例
    
    [plugin name=tempura_ruby time=100 builder=170]



◇ タグリファレンス ◇

◆ [rubyconfig] ルビ設定の変更
    
    || 概要
    
    ルビ設定を変更します。
    [plugin]タグで指定できるパラメータとまったく同じものが指定できます。
    (ゲームの途中でルビの設定を変更できるということです。)
    
    || 指定できるパラメータ
    
    [plugin]タグに指定できるパラメータとまったく同じです。



◆ [rubydic] ルビ辞書に単語の登録を行う
    
    || 概要
    
    ルビ辞書に単語を登録します。
    
    || 指定できるパラメータ
    
    str    :【必須】ルビを振る文字列。
    text   :【必須】ルビ。



◇ FAQ・既知のバグ等 ◇

・Config.tjsにおけるdefaultPitchの値を0以外にすると、正常に動作しません。
　このプラグインをご利用になる場合、defaultPitchには0をご指定ください。



◇ 履歴 ◇

2018/03/02 23:54 ティラノビルダーV170でこのプラグインを読み込んだ際にクリック待ち画像が表示されない件について対応。
2018/02/21 22:39 文章を表示している途中でクリックし高速表示を行ったとき、文字のフェードインが不自然になる問題について修正。
2018/02/13 18:52 配布開始。
