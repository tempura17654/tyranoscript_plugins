========== ========== ========== ==========
          カメラ拡張プラグイン
========== ========== ========== ==========

【最終更新日】2018/03/03 18:53
【  名  称  】カメラ拡張プラグイン
【  種  別  】ティラノスクリプト用の外部プラグイン
【 製 作 者 】荻原（おぎはら）
【 開発環境 】64bit版Windows10, ティラノスクリプトv470_rc5, ティラノライダーv211 
【 動作環境 】上記開発環境にて確認
【 連 絡 先 】Twitterまでどうぞ（@tempura17654）
【 配 布 元 】http://tempura9357.blog.fc2.com
【ライセンス】MIT

---------- ----------



◇ 概要 ◇

ティラノスクリプトV470RC5以降において、
疑似3D的なカメラの動きを簡単に実現できるようにするプラグインです。

レイヤーごとにZ座標を設定しておくことで自動的にカメラとレイヤーのZ距離を計算し、
視界において【近くの物は大きく動く】【遠くの物は小さく動く】の原則に従って(※)、
自動的に各レイヤーのカメラ移動量を計算・操作します。

※あくまでこの原則に従ってそれっぽく見えるように計算しているだけで、
　物理学的に正しい計算式ではありません。

また【指定のキャラクターにカメラを寄せる】機能もあります。なかなか便利。



◇ ファイル構成 ◇

tempura_camera
 ├ tempura_camera.js
 ├ init.ks
 ├ _SAMPLE.ks
 └ _README.txt



◇ 導入方法 ◇

解凍して出てきた「tempura_camera」フォルダを、
「data/others/plugin/」下にコピーしてください。
その後、first.ksに以下のタグを記述してください。

    [plugin name=tempura_camera]



◇ pluginタグに指定できるパラメータ ◇

    layer   :【必須】このプラグインで使用するレイヤーをカンマ区切りで指定します。
              ここで指定する順番と、[tcamera_setting]でパラメータを指定する順番は
              同一にしてください。
    manager : マネージャ機能を有効にするか。true/false
              trueのままアプリリリースしないようご注意ください。
    deftime : [tcamera]のtimeパラメータの初期値。未指定だと1000。
    defease : [tcamera]のease_typeパラメータの初期値。未指定だとease。
    defwait : [tcamera]のwa9tパラメータの初期値。未指定だとtrue。
    skiptime: スキップ時には[tcamera]のtimeパラメータがこの値に変換される。未指定だと0。
              ここに-1を指定すると、スキップ時でもtimeパラメータの調整を行わない。


    || 読み込み例

    [plugin name=tempura_camera layer=base,0,1,2 manager=true]



◇ タグリファレンス ◇

◆ [tcamera_setting] 各レイヤーの深度設定
    
    || 概要
    
    てんぷらカメラを使用するために、
    各レイヤーに深度や基準拡大率を設定します。
    
    || 指定できるパラメータ
    
    z    : 各レイヤーのz深度をカンマ区切りで指定する。初期値100。
    zoom : 各レイヤーの基準拡大率をカンマ区切りで指定する。初期値1。



◆ [tcamera_setting_init] 各レイヤーの深度設定の初期化
    
    || 概要
    
    設定した各レイヤーの深度や基準拡大率を初期化します。
    
    || 指定できるパラメータ
    
    z    : 各レイヤーのz深度をカンマ区切りで指定する。初期値100。
    zoom : 各レイヤーの基準拡大率をカンマ区切りで指定する。初期値1。



◆ [tcamera] てんぷらカメラの使用【①name指定しない場合】
    
    || 概要
    
    てんぷらカメラを使用します。
    基本的にはx, y, z, rotateを指定して使います。
    この4パラメータについてはいずれも、省略した場合は前回の値を引き継ぎます。
    
    || 指定できるパラメータ
    
    x         : カメラのx座標。
    y         : カメラのy座標。
    z         : カメラのz座標。
    rotate    : カメラの回転量。360で1周。
    time      : カメラ移動にかける時間(ミリ秒)。
    wait      : カメラ移動の完了を待つか。true/false。
    ease_type : イージングのタイプ。[camera]のリファレンスを参照のこと。



◆ [tcamera] てんぷらカメラの使用【②name指定する場合】
    
    || 概要
    
    てんぷらカメラを使用します。
    キャラクターのnameを指定することで、
    そのキャラクターにカメラを寄せることができます。
    nameを指定する場合のx, y, zは、通常とは異なる振る舞いをします。
    (省略した場合に前回の値を引き継ぐ点は同じです。)
    
    || 指定できるパラメータ
    
    name : カメラを寄せるキャラクターのname。
    zoom : そのキャラクターを何倍ズームで映すか。
    x    : カメラのx座標を決めるための計算式。
           theX, theCX, theWという3つの変数が指定できる。それぞれ、
           キャラクターの左端x座標、中央x座標、横幅を意味する。
           プラグイン読み込み時の初期値はtheCX。
    y    : カメラのy座標を決めるための計算式。
           theY, theCY, theHという3つの変数が指定できる。それぞれ、
           キャラクターの上端y座標、中央y座標、高さを意味する。
           プラグイン読み込み時の初期値はtheCY。
    z    : カメラのz座標を決めるための計算式。
           theZという1つの変数が指定できる。theZは、
           キャラクターがzoom倍で映るようにしたときのカメラのz座標を意味する。
           プラグイン読み込み時の初期値はtheZ。
    他   : rotate, time, wait, ease_typeも指定可。



◆ [tcamera_init] てんぷらカメラの位置初期化
    
    || 概要
    
    てんぷらカメラの位置を初期化します。
    [tcamera x=0 y=0 z=0 rotate=0]と全く同じ挙動を示します。
    
    || 指定できるパラメータ
    
    rotate, time, wait, ease_typeが指定可。



◇ ＦＡＱ・既知のバグ等 ◇

Ｑ．背景を切り替えると表示がおかしくなります。
Ａ．カメラ使用中にレイヤーの性質を変更するタグを使うことはできません。
　　[bg][trans]などは、カメラが初期化されている状態でお使いください。



◇ 履歴 ◇

2018/03/03 18:53 配布開始。